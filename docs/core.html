---

title: covid

keywords: fastai
sidebar: home_sidebar

summary: "Utility methods to process the John Hopkins University Covid-19 dataset."
description: "Utility methods to process the John Hopkins University Covid-19 dataset."
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_core.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>TBD: Add documentation</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="setDefaults" class="doc_header"><code>setDefaults</code><a href="https://github.com/malminhas/covid/tree/master/covid/core.py#L23" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>setDefaults</code>(<strong><code>figsize</code></strong>=<em><code>(18, 6)</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The following cell contains the names of the time series files published by JHU.  These names changed overnight on 24.03.20.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The following cell contains a couple of utility functions for returning yesterday and today as strings:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The following two utility functions are used to process a JHU csv file and turn it into a <code>pandas</code> dataframe.  Note that the dataset changed a couple of column names on 24.03.20.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="procDataframe" class="doc_header"><code>procDataframe</code><a href="https://github.com/malminhas/covid/tree/master/covid/core.py#L44" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>procDataframe</code>(<strong><code>csv</code></strong>:<code>str</code>)</p>
</blockquote>
<p>Convert input csv data or file to a pandas dataframe.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="procUrl" class="doc_header"><code>procUrl</code><a href="https://github.com/malminhas/covid/tree/master/covid/core.py#L60" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>procUrl</code>(<strong><code>url</code></strong>:<code>str</code>, <strong><code>download</code></strong>:<code>bool</code>, <strong><code>localfile</code></strong>:<code>str</code>=<em><code>None</code></em>, <strong><code>force</code></strong>:<code>bool</code>=<em><code>False</code></em>, <strong><code>verbose</code></strong>:<code>bool</code>=<em><code>False</code></em>)</p>
</blockquote>
<p>Optionally download then process csv data or file at url converting it to a pandas dataframe.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The following cell contains a utility method to return a <code>pandas</code> dataframe with a given day's daily report and then ploty it by <code>kind</code> which can be one of <code>["Confirmed","Deaths","Recovered"]</code>:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="getDailyReport" class="doc_header"><code>getDailyReport</code><a href="https://github.com/malminhas/covid/tree/master/covid/core.py#L75" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>getDailyReport</code>(<strong><code>day</code></strong>:<code>str</code>, <strong><code>download</code></strong>:<code>bool</code>=<em><code>False</code></em>, <strong><code>force</code></strong>:<code>bool</code>=<em><code>False</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="plotDailyReport" class="doc_header"><code>plotDailyReport</code><a href="https://github.com/malminhas/covid/tree/master/covid/core.py#L81" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>plotDailyReport</code>(<strong><code>df</code></strong>:<code>DataFrame</code>, <strong><code>topN</code></strong>:<code>int</code>=<em><code>10</code></em>, <strong><code>color</code></strong>:<code>str</code>=<em><code>'y'</code></em>, <strong><code>kind</code></strong>:<code>str</code>=<em><code>'Confirmed'</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The following cell contains three utility methods to return time series data for each of <code>["Confirmed","Deaths","Recovered"]</code> in a <code>pandas</code> dataframe given a url to a corresponding csv file:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="getTimeSeriesConfirmed" class="doc_header"><code>getTimeSeriesConfirmed</code><a href="https://github.com/malminhas/covid/tree/master/covid/core.py#L91" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>getTimeSeriesConfirmed</code>(<strong><code>download</code></strong>:<code>bool</code>=<em><code>False</code></em>, <strong><code>force</code></strong>:<code>bool</code>=<em><code>False</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="getTimeSeriesDeaths" class="doc_header"><code>getTimeSeriesDeaths</code><a href="https://github.com/malminhas/covid/tree/master/covid/core.py#L96" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>getTimeSeriesDeaths</code>(<strong><code>download</code></strong>:<code>bool</code>=<em><code>False</code></em>, <strong><code>force</code></strong>:<code>bool</code>=<em><code>False</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="getTimeSeriesRecovered" class="doc_header"><code>getTimeSeriesRecovered</code><a href="https://github.com/malminhas/covid/tree/master/covid/core.py#L101" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>getTimeSeriesRecovered</code>(<strong><code>download</code></strong>:<code>bool</code>=<em><code>False</code></em>, <strong><code>force</code></strong>:<code>bool</code>=<em><code>False</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The following cell contains methods to aggregate each of <code>["Confirmed","Deaths","Recovered"]</code> by county.
Note that <code>force</code> and <code>download</code> are both set <code>True</code> in all cases.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="procTimeSeriesDataframe" class="doc_header"><code>procTimeSeriesDataframe</code><a href="https://github.com/malminhas/covid/tree/master/covid/core.py#L107" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>procTimeSeriesDataframe</code>(<strong><code>r</code></strong>:<code>List</code>[<code>T</code>])</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="procTimeSeries" class="doc_header"><code>procTimeSeries</code><a href="https://github.com/malminhas/covid/tree/master/covid/core.py#L113" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>procTimeSeries</code>(<strong><code>df</code></strong>:<code>DataFrame</code>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The following cell contains a utility plotting method for the processed and aggregated time series dataframe:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="plotCountryTimeSeries" class="doc_header"><code>plotCountryTimeSeries</code><a href="https://github.com/malminhas/covid/tree/master/covid/core.py#L136" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>plotCountryTimeSeries</code>(<strong><code>df</code></strong>:<code>DataFrame</code>, <strong><code>countries</code></strong>:<code>List</code>[<code>T</code>], <strong><code>kind</code></strong>:<code>str</code>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">nbdev.export</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">notebook2script</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Converted 00_core.ipynb.
Converted index.ipynb.
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

